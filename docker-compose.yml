services:
  api:
    build: .
    container_name: booktracker-api
    environment:
      - PORT=8081
      # ホストで動いている Datastore エミュレータに接続（先に別ターミナルで gcloud beta emulators datastore start --project=booktracker）
      - DATASTORE_EMULATOR_HOST=host.docker.internal:8081
      - GCP_PROJECT_ID=${GCP_PROJECT_ID:-booktracker}
    ports:
      - "8085:8081"
    volumes:
      - .:/app
    extra_hosts:
      - "host.docker.internal:host-gateway"
